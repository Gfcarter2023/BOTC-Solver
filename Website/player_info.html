<!DOCTYPE html>
<html lang="en">
<head>
</head>
<body>
    <form id="edit-form">
  <label for="name">Name:</label>
  <input type="text" id="name" name="name"><br>
  
  <label for="score">Score:</label>
  <input type="number" id="score" name="score"><br>
  
  <button type="submit">Save Changes</button>
</form>

<script>

async function fetchPlayerData(id) {
    console.log(`http://localhost:3000/api/player/${id}`)
    const response = await fetch(`http://localhost:3000/api/player/${id}`);
    if (response.ok) {
        const player = await response.json();
        // Populate your form fields here
        document.getElementById('name').value = player.name;
        document.getElementById('score').value = player.score;
    } else {
        console.error('Failed to fetch player data.');
    }
}

// Call this on page load after getting the ID
const urlParams = new URLSearchParams(window.location.search);
const playerId = urlParams.get('id');
if (playerId) {
    fetchPlayerData(playerId);
}


document.getElementById('edit-form').addEventListener('submit', async (event) => {
    event.preventDefault(); // Prevent default form submission

    const updatedData = {
        name: document.getElementById('name').value,
        score: parseInt(document.getElementById('score').value, 10)
    };

    const response = await fetch(`http://localhost:3000/api/player/${playerId}`, {
        method: 'POST', // Use POST or PUT for updates
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(updatedData)
    });

    if (response.ok) {
        alert('Player information updated successfully!');
        // Optionally redirect back to the main page
        // window.location.href = 'index.html';
    } else {
        alert('Error saving data.');
    }
});
</script>
</body>
</html>